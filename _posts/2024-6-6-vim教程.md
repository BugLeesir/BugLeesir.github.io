---
layout : article
title : vim教程
---

<!-- TOC -->

- [vim/vi 的使用](#vimvi-的使用)
  - [命令模式](#命令模式)
  - [输入模式](#输入模式)
  - [底线命令模式](#底线命令模式)
- [常用快捷键/命令](#常用快捷键命令)
  - [移动光标](#移动光标)
  - [删除复制](#删除复制)
  - [插入模式](#插入模式)
  - [编辑](#编辑)
  - [命令行模式](#命令行模式)
  - [vim环境变更](#vim环境变更)

<!-- /TOC -->

## vim/vi 的使用

vi/vim 共分为三种模式，命令模式（Command Mode）、输入模式（Insert Mode）和命令行模式（Command-Line Mode）

### 命令模式

用户刚刚启动 vi/vim，便进入了命令模式。

此状态下敲击键盘动作会被 Vim 识别为命令，而非输入字符，比如我们此时按下 i，并不会输入一个字符，i 被当作了一个命令。

若想要编辑文本，只需要启动 Vim，进入了命令模式，按下 i 切换到输入模式即可。

命令模式只有一些最基本的命令，因此仍要依靠底线命令行模式输入更多命令。

### 输入模式

在命令模式下按下 i 就进入了输入模式，使用 Esc 键可以返回到普通模式。

ESC，退出输入模式，切换到命令模式

### 底线命令模式

在命令模式下按下 :（英文冒号）就进入了底线命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

按 ESC 键可随时退出底线命令模式。

## 常用快捷键/命令

### 移动光标

|命令|功能|
|---|---|
|h,i,j,k|上，下，左，右移动光标|
|ctrl + e |移动页面|
|ctrl + f |上翻一页|
|ctrl + b |下翻一页|
|ctrl + u |上翻半页|
|ctrl + d |下翻半页|
| w |跳到下一个字首，按标点或单词分割|
| W |跳到下一个字首，长跳，如end-of-line被认为是一个字|
| e |跳到下一个字尾|
| E |跳到下一个字尾，长跳|
| b |跳到上一个字|
| B |跳到上一个字，长跳|
| 0 |跳至行首，不管有无缩进，就是跳到第0个字符|
| ^ |跳至行首的第一个字符|
| $ |跳至行尾|
| gg |跳至文首|
| G |跳至文尾|
| [n]gg |调至第n行|
|gd|跳至当前光标所在的变量的声明处|
|f[x]|在当前行中找x字符，找到了就跳转至|
|;|重复上一个f命令，而不用重复的输入fx|
|*|查找光标所在处的单词，向下查找|
|#|查找光标所在处的单词，向上查找|

### 删除复制

||说明|
|---|---|
|x,X|在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于 [backspace] 亦即是退格键) (常用)|

|命令|功能|
|---|---|
|[n]x|n 为数字，连续向后删除 n 个字符。举例来说，我要连续删除 10 个字符， 『10x』|
|dd|剪切游标所在的那一整行(常用)，用 p/P 可以粘贴|
| ndd | n 为数字。剪切光标所在的向下 n 行，例如 20dd 则是剪切 20 行(常用)，用 p/P 可以粘贴。 |
| d1G | 删除光标所在到第一行的所有数据 |
| dG | 删除光标所在到最后一行的所有数据 |
| d$ | 删除游标所在处，到该行的最后一个字符 |
| d0 | 那个是数字的 0 ，删除游标所在处，到该行的最前面一个字符 |
| yy | 复制游标所在的那一行(常用) |
| nyy | n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行(常用) |
| y1G | 复制游标所在行到第一行的所有数据 |
| yG | 复制游标所在行到最后一行的所有数据 |
| y0 | 复制光标所在的那个字符到该行行首的所有数据 |
| y$ | 复制光标所在的那个字符到该行行尾的所有数据 |
| p, P | p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后， 那 10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。 (常用) |
| J | 将光标所在行与下一行的数据结合成同一行 |
| c | 重复删除多个数据，例如向下删除 10 行，\[ 10cj \] |
| u | 复原前一个动作。(常用) |
| \[Ctrl\]+r | 重做上一个动作。(常用) |
| . |重复前一个动作的意思。 如果你想要重复删除、重复贴上等等动作，按下小数点『.』就好了 (常用) |

### 插入模式

|命令|功能|
|---|---|
| i, I | 进入输入模式(Insert mode)：  i 为『从目前光标所在处输入』， I 为『在目前所在行的第一个非空格符处开始输入』。 (常用) |
| a, A | 进入输入模式(Insert mode)：  a 为『从目前光标所在的下一个字符处开始输入』， A 为『从光标所在行的最后一个字符处开始输入』。(常用) |
| o, O | 进入输入模式(Insert mode)：  这是英文字母 o 的大小写。o 为在目前光标所在的下一行处输入新的一行； O 为在目前光标所在的上一行处输入新的一行！(常用) |
| r, R | 进入取代模式(Replace mode)：  r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文字，直到按下 ESC 为止；(常用) |
| \[Esc\] | 退出编辑模式，回到一般模式中(常用) |

### 编辑

|命令|功能|
|---|---|
|J|将下一行和当前行连接为一行|
|cc|删除当前行并进入编辑模式|
|cw|删除当前字，并进入编辑模式|
|c$|删除从当前位置至行末的内容，并进入编辑模式|
|s|删除当前字符并进入编辑模式|
|S|删除光标所在行并进入编辑模式|
|xp|交换当前字符和下一个字符|
|~|切换大小写，当前字符|
|>>|将当前行右移一个单位|
|<<|将当前行左移一个单位(一个tab符)|
|==|自动缩进当前行|
|gg=G|自动排版|

### 命令行模式

|命令|功能|
|---|---|
| :w | 将编辑的数据写入硬盘档案中(常用) |
| :w! | 若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 还是跟你对该档案的档案权限有关啊！ |
| :q | 离开 vi (常用) |
| :q! | 若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。 |
| :wq | 储存后离开，若为 :wq! 则为强制储存后离开 (常用) |
| ZZ | 这是大写的 Z 喔！如果修改过，保存当前文件，然后退出！效果等同于(保存并退出) |
| ZQ | 不保存，强制退出。效果等同于 :q!。 |
| :w \[filename\] | 将编辑的数据储存成另一个档案（类似另存新档） |
| :r \[filename\] | 在编辑的数据中，读入另一个档案的数据。亦即将 『filename』 这个档案内容加到游标所在行后面 |
| :n1,n2 w \[filename\] | 将 n1 到 n2 的内容储存成 filename 这个档案。 |
| :! command | 暂时离开 vi 到指令行模式下执行 command 的显示结果！例如  『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的档案信息！ |

### vim环境变更

|命令|功能|
|---|---|
| :set nu | 显示行号，设定之后，会在每一行的前缀显示该行的行号 |
| :set nonu | 与 set nu 相反，为取消行号！ |
