---
layout : article
title : "前端设计文档"
---

## 数据库设计规约

- 表名规范

  1. 表名、字段名必须使用小写字母或数字；禁止出现数字开头

  2. 表名不使用复数名词

  3. 禁用保留字，如 desc、range、match、delayed 等

- 表的前缀
  `sys_`

  例如：`sys_user`、`sys_user_role`

- 字段规则

  1. 小数类型为 decimal，禁止使用 float 和 double

  2. 如果存储的字符串长度几乎相等，使用 char 定长字符串类型

  3. 表必备三字段：id, created_at, updated_at 再加上逻辑删除`is_deleted`和版本号`version`

     > 其中 id 必为主键，类型为 unsigned bigint、单表时自增、步长为 1。gmt_create,  gmt_modified 的类型均为 date_time 类型。
     >
     > "gmt" 是 "Greenwich Mean Time" 的缩写，代表格林威治标准时间。
     >
     > "gmt_create" 和 "gmt_modified" 的命名来表示创建时间和修改时间

  4. 字段词性：尽量使用形容词加名词
  5. 多个单词如何如何连接：使用下划线

- 公共字段

  1. **id：** 作为主键的唯一标识符，通常命名为 `id`，若作为外键，则联合两个表名，举例：`user_role_id`
  2. **创建时间和修改时间：** 记录记录的创建时间和最后修改时间，可以分别命名为 `created_at` 和 `updated_at`。
  3. **租户 机构 公司的id**：用于数据独立
  4. **操作人字段：** 记录执行某操作的用户或系统的信息，命名为 `updated_by`。
  5. **逻辑删除标志：** 如果表需要支持逻辑删除，可以添加一个标志字段表示记录是否被删除，命名为 `is_deleted` 。
  6. **版本号：** 用于乐观并发控制的版本号字段，通常命名为 `version`。

## 数据库表

### 租户表

### 机构表

![image-20240120223729996](https://s2.loli.net/2024/01/20/TXZyM2iAEOKmusY.png)

### 公司表

![image-20240120223757806](https://s2.loli.net/2024/01/20/YxGT7hfWcSBzm43.png)

### 部门表

![image-20240120224334608](https://s2.loli.net/2024/01/20/pQb4mLtcKqEa9Ad.png)

### 职位表

![image-20240120224602492](https://s2.loli.net/2024/01/20/DXxywdKPLFhqV7Q.png)

### 子系统表

![image-20240120223435727](https://s2.loli.net/2024/01/20/Nqj2pZdYavWG8t1.png)

### 资源表

![image-20240120223602106](https://s2.loli.net/2024/01/20/Q3my6Jevz9I8E2H.png)

### 角色表

![image-20240120223524591](https://s2.loli.net/2024/01/20/G1rojlCtIMkFRBZ.png)

### 用户表

![image-20240120223649477](https://s2.loli.net/2024/01/20/NTeKhvGYR43sbEX.png)

### 角色资源关系表

![image-20240120224826803](https://s2.loli.net/2024/01/20/pcDbSi5VPg8xMvo.png)

### 用户角色关系表

![image-20240120224841752](https://s2.loli.net/2024/01/20/5KjoLyZrhIqDNUi.png)

## E-R图附件

![image-20240120224933637](https://s2.loli.net/2024/01/20/LlP9jwVQTBnpgaU.png)

问题：

1. 用户要有头像吗，字段类型
2. 子系统的图标和openImg 的字段类型是 varchar（20）可以吗 ，因为可以用svg的icon
3. 子系统和资源的关系是一对多吗
4. 角色有自己的公司？ 用户有自己的公司和部门？那角色和用户为什么多对多？
